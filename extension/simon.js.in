var messageIdCounter = 1

function makeTransportPackage(message) {
  return {
    id: messageIdCounter++,
    module: "moduleName",
    method: "moduleMethod"
    data: message,
    timestamp: new Date().toISOString()
  }
}

var port = chrome.runtime.connectNative("@PROJECT_NAME@");

port.onMessage.addListener(function(message) {
  console.log(message);
});

port.onDisconnect.addListener(function() {
  console.log("Disconnected from @PROJECT_NAME@");
});

var simonSays = function(message) {
  port.postMessage(makeTransportPackage(message));
}
